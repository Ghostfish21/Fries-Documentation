<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-08-17T17:42:39.0708858"><title>Hierarchy Button | Fries</title><script type="application/json" id="virtual-toc-data">[{"id":"o7k7vt_6","level":0,"title":"快速开始","anchor":"#o7k7vt_6"},{"id":"o7k7vt_7","level":0,"title":"设计与行为说明","anchor":"#o7k7vt_7"},{"id":"o7k7vt_8","level":0,"title":"线程安全","anchor":"#o7k7vt_8"},{"id":"o7k7vt_9","level":0,"title":"故障排查","anchor":"#o7k7vt_9"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Hierarchy Button | Fries"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Fries Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/hierarchy-button.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Hierarchy Button | Fries"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/hierarchy-button.html#webpage",
    "url": "writerside-documentation/hierarchy-button.html",
    "name": "Hierarchy Button | Fries",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Fries Help"
}</script><!-- End Schema.org --></head><body data-id="Hierarchy_Button" data-main-title="Hierarchy Button" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Overview.md|Fries Utils Pack 总览"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Fries  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Hierarchy_Button" id="Hierarchy_Button.md">Hierarchy Button</h1><p id="o7k7vt_3"><code class="code" id="o7k7vt_10">HierarchyButton</code> 是一个 <code class="code" id="o7k7vt_11">MonoBehaviour</code> ，用于在 <span class="control" id="o7k7vt_12">Hierarchy</span> 面板中把某个 <code class="code" id="o7k7vt_13">GameObject</code> 的整行变成&ldquo;可点击按钮&rdquo;。 <br> 它允许你在 Inspector 中选择一个<span class="control" id="o7k7vt_15">静态方法</span>或一个<span class="control" id="o7k7vt_16">实例方法</span> ，当在 Hierarchy 中左键点击该对象行时即会调用该方法。 <br> 此外， <code class="code" id="o7k7vt_18">SceneJmp</code> 提供了一个开箱即用的实例方法 <code class="code" id="o7k7vt_19">jmp(Event)</code> ，用于<span class="control" id="o7k7vt_20">一键跳转并打开指定场景</span>。</p><aside class="prompt" data-type="tip" data-title="" id="o7k7vt_4"><p id="o7k7vt_21">该功能主要由编辑器脚本驱动（<code class="code" id="o7k7vt_22">#if UNITY_EDITOR</code>）， <span class="control" id="o7k7vt_23">在运行时不编译</span>： <br><code class="code" id="o7k7vt_25">HierarchyButton.Awake()</code> 与 <code class="code" id="o7k7vt_26">SceneJmp.Awake()</code> 内部均调用 <code class="code" id="o7k7vt_27">Destroy(this)</code> ，确保它们不会出现在 Player 构建中。</p></aside><section class="chapter"><h2 id="o7k7vt_6" data-toc="o7k7vt_6">快速开始</h2><section class="chapter"><h3 id="1" data-toc="1">1) 安装与添加组件</h3><ol class="list _decimal" id="o7k7vt_33" type="1"><li class="list__item" id="o7k7vt_36"><p id="o7k7vt_38">在需要成为&ldquo;按钮&rdquo;的对象上 <span class="control" id="o7k7vt_39">添加组件</span>： <code class="code" id="o7k7vt_40">HierarchyButton</code>。</p></li><li class="list__item" id="o7k7vt_37"><p id="o7k7vt_41">（可选）为了一键跳转场景，在同一个对象上再 <span class="control" id="o7k7vt_42">添加组件</span>： <code class="code" id="o7k7vt_43">SceneJmp</code>。</p></li></ol><aside class="prompt" data-type="tip" data-title="" id="o7k7vt_34"><p id="o7k7vt_44">当对象添加了 <code class="code" id="o7k7vt_45">HierarchyButton</code> 后，脚本会在 Hierarchy 中为该对象行绘制背景，并拦截左键点击作为&ldquo;按钮点击&rdquo;。</p></aside></section><section class="chapter"><h3 id="2-response-mode" data-toc="2-response-mode">2) 选择响应模式（Response Mode）</h3><p id="o7k7vt_46">在 <code class="code" id="o7k7vt_51">HierarchyButton</code> 的 Inspector 中设置：</p><ul class="list _bullet" id="o7k7vt_47"><li class="list__item" id="o7k7vt_52"><p id="o7k7vt_54"><code class="code" id="o7k7vt_55">StaticMethod</code> ：调用<span class="control" id="o7k7vt_56">静态方法</span> （适合工具方法、无实例依赖的操作）。</p></li><li class="list__item" id="o7k7vt_53"><p id="o7k7vt_57"><code class="code" id="o7k7vt_58">InstanceMethod</code> ：调用<span class="control" id="o7k7vt_59">实例方法</span> （在某个 <code class="code" id="o7k7vt_60">MonoBehaviour</code> 实例上调用）。</p></li></ul><p id="o7k7vt_48">行背景颜色用于提示模式：</p><ul class="list _bullet" id="o7k7vt_49"><li class="list__item" id="o7k7vt_61"><p id="o7k7vt_63"><span class="control" id="o7k7vt_64">蓝色</span>： <code class="code" id="o7k7vt_65">StaticMethod</code> （当目标脚本/方法有效时显示为较亮的蓝色）。</p></li><li class="list__item" id="o7k7vt_62"><p id="o7k7vt_66"><span class="control" id="o7k7vt_67">绿色</span>： <code class="code" id="o7k7vt_68">InstanceMethod</code>。</p></li></ul></section><section class="chapter"><h3 id="3a-staticmethod" data-toc="3a-staticmethod">3A) 配置静态方法（StaticMethod）</h3><ol class="list _decimal" id="o7k7vt_69" type="1"><li class="list__item" id="o7k7vt_74"><p id="o7k7vt_77">将 <code class="code" id="o7k7vt_78">Response Mode</code> 设为 <span class="control" id="o7k7vt_79">StaticMethod</span>。</p></li><li class="list__item" id="o7k7vt_75"><p id="o7k7vt_80">在 <code class="code" id="o7k7vt_81">Target</code> 字段中，选择包含目标方法的 <code class="code" id="o7k7vt_82">MonoScript</code>。</p></li><li class="list__item" id="o7k7vt_76"><p id="o7k7vt_83">在 <code class="code" id="o7k7vt_84">Method</code> 下拉框中选择方法名。</p></li></ol><p id="o7k7vt_70"><span class="control" id="o7k7vt_85">方法签名要求</span> ：必须是 <span class="control" id="o7k7vt_86">public static</span> ，且<span class="control" id="o7k7vt_87">第一个参数类型为 <code class="code" id="o7k7vt_88">Event</code></span>：</p><div class="code-block" data-lang="none">
using UnityEngine;

public static class MyHierarchyActions
{
    // 必须是 public static，并接收 UnityEditor 的 Event（Editor 下可用）
    public static void Ping(Event evt)
    {
        Debug.Log($&quot;Hierarchy clicked at: {evt.mousePosition}&quot;);
    }
}
</div><aside class="prompt" data-type="tip" data-title="" id="o7k7vt_72"><p id="o7k7vt_89">如果脚本里没有符合签名的方法，Inspector 会显示警告 &ldquo;No valid static method found...&rdquo;。</p></aside></section><section class="chapter"><h3 id="3b-instancemethod" data-toc="3b-instancemethod">3B) 配置实例方法（InstanceMethod）</h3><ol class="list _decimal" id="o7k7vt_90" type="1"><li class="list__item" id="o7k7vt_95"><p id="o7k7vt_98">将 <code class="code" id="o7k7vt_99">Response Mode</code> 设为 <span class="control" id="o7k7vt_100">InstanceMethod</span>。</p></li><li class="list__item" id="o7k7vt_96"><p id="o7k7vt_101">在 <span class="control" id="o7k7vt_102">Target MonoBehaviour</span> 中，拖入/选择目标组件实例（可以是当前对象或其他对象上的 <code class="code" id="o7k7vt_103">MonoBehaviour</code>）。</p></li><li class="list__item" id="o7k7vt_97"><p id="o7k7vt_104">在 <code class="code" id="o7k7vt_105">Method</code> 下拉框中选择方法名。 <figure id="o7k7vt_106"><img alt="Instance Method (Hierarchy Button).png" src="Fries-Documentation/Instance%20Method%20(Hierarchy%20Button).png" title="Instance Method (Hierarchy Button).png" width="714" height="153"></figure></p></li></ol><p id="o7k7vt_91"><span class="control" id="o7k7vt_107">方法签名要求</span> ：必须是 <span class="control" id="o7k7vt_108">public 实例方法</span> ，且<span class="control" id="o7k7vt_109">第一个参数类型为 <code class="code" id="o7k7vt_110">Event</code></span>：</p><div class="code-block" data-lang="none">
using UnityEngine;

public class MyReceiver : MonoBehaviour
{
    public void DoSomething(Event evt)
    {
        Debug.Log($&quot;DoSomething invoked from Hierarchy. Alt pressed? {evt.alt}&quot;);
    }
}
</div><aside class="prompt" data-type="tip" data-title="" id="o7k7vt_93"><p id="o7k7vt_111">仅当方法满足&ldquo;实例方法 + 第一个参数为 <code class="code" id="o7k7vt_112">Event</code> &rdquo;时才会出现在下拉列表。</p></aside></section><section class="chapter"><h3 id="4-scenejmp" data-toc="4-scenejmp">4) 一键跳转场景（使用 SceneJmp）</h3><p id="o7k7vt_113"><code class="code" id="o7k7vt_117">SceneJmp</code> 提供了一个现成的实例方法 <code class="code" id="o7k7vt_118">jmp(Event)</code> ，用于在点击时<span class="control" id="o7k7vt_119">保存当前改动并打开目标场景</span>：</p><ol class="list _decimal" id="o7k7vt_114" type="1"><li class="list__item" id="o7k7vt_120"><p id="o7k7vt_123">在同一个对象上添加 <span class="control" id="o7k7vt_124">SceneJmp</span> 组件。</p></li><li class="list__item" id="o7k7vt_121"><p id="o7k7vt_125">在 <code class="code" id="o7k7vt_126">SceneJmp</code> 的 <code class="code" id="o7k7vt_127">sceneAsset</code> 中选择目标场景（<code class="code" id="o7k7vt_128">.unity</code> 资源）。</p></li><li class="list__item" id="o7k7vt_122"><p id="o7k7vt_129">将 <code class="code" id="o7k7vt_130">HierarchyButton</code> 的模式设置为 <span class="control" id="o7k7vt_131">InstanceMethod</span> ，目标脚本指向<span class="control" id="o7k7vt_132">该对象上的 <code class="code" id="o7k7vt_134">SceneJmp</code> 组件实例</span> ，方法选择 <span class="control" id="o7k7vt_133"><code class="code" id="o7k7vt_135">jmp</code></span>。</p></li></ol><aside class="prompt" data-type="tip" data-title="" id="o7k7vt_115"><p id="o7k7vt_136">打开场景前会弹出&ldquo;是否保存当前场景改动&rdquo;的标准提示（<code class="code" id="o7k7vt_137">EditorSceneManager.SaveCurrentModifiedScenesIfUserWantsTo()</code> ）；确认后会调用 <code class="code" id="o7k7vt_138">EditorSceneManager.OpenScene(...)</code> 打开新场景。</p></aside></section></section><section class="chapter"><h2 id="o7k7vt_7" data-toc="o7k7vt_7">设计与行为说明</h2><ul class="list _bullet" id="o7k7vt_139"><li class="list__item" id="o7k7vt_141"><p id="o7k7vt_144"><span class="control" id="o7k7vt_145">点击触发</span> ：左键点击该对象在 Hierarchy 中的整行区域即会触发方法调用；点击同时也会选中该对象。</p></li><li class="list__item" id="o7k7vt_142"><p id="o7k7vt_146"><span class="control" id="o7k7vt_147">事件消耗</span> ：点击调用成功后会 <code class="code" id="o7k7vt_148">evt.Use()</code> ，避免事件被后续处理链重复消费。</p></li><li class="list__item" id="o7k7vt_143"><p id="o7k7vt_149"><span class="control" id="o7k7vt_150">运行时自毁</span>： <code class="code" id="o7k7vt_151">Awake()</code> 中销毁自身，确保该功能仅在编辑器中编译和生效，不会影响运行时逻辑与构建体积。</p></li></ul></section><section class="chapter"><h2 id="o7k7vt_8" data-toc="o7k7vt_8">线程安全</h2><ul class="list _bullet" id="o7k7vt_152"><li class="list__item" id="o7k7vt_154"><p id="o7k7vt_156">与所有 UnityEditor GUI 回调一致， <span class="control" id="o7k7vt_157">仅在主线程</span>执行。</p></li><li class="list__item" id="o7k7vt_155"><p id="o7k7vt_158">当前实现没有并发保护； <span class="control" id="o7k7vt_159">不要在多线程中调用或修改相关对象/状态</span>。</p></li></ul></section><section class="chapter"><h2 id="o7k7vt_9" data-toc="o7k7vt_9">故障排查</h2><ul class="list _bullet" id="o7k7vt_160"><li class="list__item" id="o7k7vt_161"><p id="o7k7vt_165"><span class="control" id="o7k7vt_167">症状</span> ：点击无反应</p><ul class="list _bullet" id="o7k7vt_166"><li class="list__item" id="o7k7vt_168"><p id="o7k7vt_170"><span class="control" id="o7k7vt_171">排查</span> ：确认对象上挂有 <code class="code" id="o7k7vt_172">HierarchyButton</code> ；确认点击的是该对象在 Hierarchy 面板中的行。</p></li><li class="list__item" id="o7k7vt_169"><p id="o7k7vt_173"><span class="control" id="o7k7vt_174">排查</span> ：查看模式是否匹配（Static/Instance）。</p></li></ul></li><li class="list__item" id="o7k7vt_162"><p id="o7k7vt_175"><span class="control" id="o7k7vt_177">症状</span> ：StaticMethod 下拉列表为空 / 警告 &ldquo;No valid static method found...&rdquo;</p><ul class="list _bullet" id="o7k7vt_176"><li class="list__item" id="o7k7vt_178"><p id="o7k7vt_180"><span class="control" id="o7k7vt_181">排查</span> ：目标脚本是否正确；方法是否为 <code class="code" id="o7k7vt_182">public static</code>； <span class="control" id="o7k7vt_183">第一个参数是否为 <code class="code" id="o7k7vt_184">Event</code></span>。</p></li><li class="list__item" id="o7k7vt_179"><p id="o7k7vt_185"><span class="control" id="o7k7vt_186">排查</span> ：脚本是否成功编译；控制台是否报错。</p></li></ul></li><li class="list__item" id="o7k7vt_163"><p id="o7k7vt_187"><span class="control" id="o7k7vt_189">症状</span> ：InstanceMethod 下拉列表为空 / 警告 &ldquo;No valid method found...&rdquo;</p><ul class="list _bullet" id="o7k7vt_188"><li class="list__item" id="o7k7vt_190"><p id="o7k7vt_191"><span class="control" id="o7k7vt_192">排查</span> ：是否正确指定了 <code class="code" id="o7k7vt_193">Target MonoBehaviour</code> 实例；方法是否为 <code class="code" id="o7k7vt_194">public</code> 实例方法，且<span class="control" id="o7k7vt_195">第一个参数为 <code class="code" id="o7k7vt_196">Event</code></span>。</p></li></ul></li><li class="list__item" id="o7k7vt_164"><p id="o7k7vt_197"><span class="control" id="o7k7vt_199">症状</span> ：已配置 SceneJmp 但没有打开场景</p><ul class="list _bullet" id="o7k7vt_198"><li class="list__item" id="o7k7vt_200"><p id="o7k7vt_202"><span class="control" id="o7k7vt_203">排查</span>： <code class="code" id="o7k7vt_204">sceneAsset</code> 是否已设置；是否为有效的 <code class="code" id="o7k7vt_205">.unity</code> 资源； <code class="code" id="o7k7vt_206">AssetDatabase.GetAssetPath</code> 是否返回了有效路径。</p></li><li class="list__item" id="o7k7vt_201"><p id="o7k7vt_207"><span class="control" id="o7k7vt_208">排查</span> ：是否在提示保存改动时选择了取消。</p></li></ul></li></ul></section><div class="last-modified">17 八月 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="static-method1.html" class="navigation-links__prev">Static Method Field</a><a href="task-performer.html" class="navigation-links__next">Task Performer</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>